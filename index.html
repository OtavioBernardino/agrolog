<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgroLog Pro Cloud - Master System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, push, update, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCy2_TVj_AXhu2HUlQBUuL3nUkYWGVzA0U",
            authDomain: "agrolog-f89d7.firebaseapp.com",
            databaseURL: "https://agrolog-f89d7-default-rtdb.firebaseio.com",
            projectId: "agrolog-f89d7",
            storageBucket: "agrolog-f89d7.firebasestorage.app",
            messagingSenderId: "79965062136",
            appId: "1:79965062136:web:1361b2e7001ad850288c0d",
            measurementId: "G-2YKKE82KTD"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const frotaRef = ref(db, 'frota');
        const tiposRevRef = ref(db, 'tipos_revisao');
        const logsRef = ref(db, 'logs');
        const operRef = ref(db, 'operadores');

        onValue(frotaRef, (s) => { 
            const data = s.val();
            window.frota = data ? Object.values(data) : []; 
            window.frotaKeys = data ? Object.keys(data) : []; 
            render(); 
        });
        onValue(tiposRevRef, (s) => { window.tiposRev = s.val() || {}; render(); });
        onValue(logsRef, (s) => { window.logs = s.val() ? Object.values(s.val()).reverse() : []; render(); });
        onValue(operRef, (s) => { window.oper = s.val() ? Object.values(s.val()) : []; render(); });

        window.registrarHoras = (tratorId, operadorNome, horas) => {
            const tIdx = window.frota.findIndex(x => x.id == tratorId);
            const tKey = window.frotaKeys[tIdx];
            update(ref(db, `frota/${tKey}`), { horimetro: parseFloat(horas) });
            push(logsRef, { 
                data: new Date().toLocaleDateString('pt-BR'),
                hora: new Date().toLocaleTimeString('pt-BR', {hour: '2-digit', minute:'2-digit'}),
                maquina: window.frota[tIdx].modelo, quem: operadorNome, valor: horas 
            });
            window.showToast("Dados salvos e sincronizados!", "success");
        };

        window.criarTipoRevisao = (nome, horas) => {
            const id = push(tiposRevRef).key;
            set(ref(db, `tipos_revisao/${id}`), { id, nome, horas: parseFloat(horas) });
            window.showToast("Novo tipo de revisão criado!", "success");
        };

        window.vincularRevisao = (tratorId, tipoId) => {
            if(!tratorId || !tipoId) return window.showToast("Selecione máquina e plano", "warning");
            const tIdx = window.frota.findIndex(x => x.id == tratorId);
            const tKey = window.frotaKeys[tIdx];
            let planos = window.frota[tIdx].planos || [];
            if (!planos.includes(tipoId)) {
                planos.push(tipoId);
                update(ref(db, `frota/${tKey}`), { planos });
                window.showToast("Revisão associada!", "success");
            }
        };

        window.salvarTrator = (mod, hor) => {
            if(!mod || !hor) return window.showToast("Preencha todos os campos", "warning");
            const n = push(frotaRef);
            set(n, { id: Date.now(), modelo: mod, horimetro: parseFloat(hor), ultimaRevisao: parseFloat(hor), planos: [] });
            window.showToast("Máquina adicionada!", "success");
        };

        window.salvarOperador = (nome) => {
            if(!nome) return window.showToast("Digite o nome", "warning");
            push(operRef, { id: Date.now(), nome });
            window.showToast("Operador cadastrado!", "success");
        };
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #020617; color: #e2e8f0; }
        
        .tab-content { display: none; animation: fadeIn 0.4s ease-out; }
        .tab-content.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #side-menu { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); transform: translateX(-100%); }
        #side-menu.open { transform: translateX(0); }

        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-btn.active { color: #fbbf24; }

        input, select { transition: all 0.2s ease; }
        input:focus, select:focus { border-color: #fbbf24 !important; box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.1); }

        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body class="pb-28">

    <div id="toast-container" class="fixed top-5 left-1/2 -translate-x-1/2 z-[100] w-80 pointer-events-none space-y-2"></div>
    <div id="overlay" onclick="toggleMenu()" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] hidden"></div>

    <div id="side-menu" class="fixed top-0 left-0 h-full w-72 bg-slate-900 z-[70] shadow-2xl p-6 border-r border-slate-800">
        <div class="flex items-center gap-3 mb-10">
            <div class="w-10 h-10 bg-yellow-500 rounded-xl flex items-center justify-center text-slate-950">
                <i class="fas fa-leaf text-xl"></i>
            </div>
            <h2 class="text-xl font-extrabold text-white tracking-tight">AGRO<span class="text-yellow-500">LOG</span></h2>
        </div>
        <nav class="space-y-1">
            <button onclick="navTo('dashboard')" class="w-full text-left p-4 hover:bg-slate-800 rounded-2xl flex gap-4 transition-all items-center"><i class="fas fa-th-large opacity-50"></i> Dashboard</button>
            <button onclick="navTo('relatorios')" class="w-full text-left p-4 hover:bg-slate-800 rounded-2xl flex gap-4 transition-all items-center text-purple-400"><i class="fas fa-chart-pie opacity-50"></i> Relatórios</button>
            <button onclick="navTo('config-rev')" class="w-full text-left p-4 hover:bg-slate-800 rounded-2xl flex gap-4 transition-all items-center text-orange-400"><i class="fas fa-screwdriver-wrench opacity-50"></i> Manutenção</button>
            <button onclick="navTo('cad-trator')" class="w-full text-left p-4 hover:bg-slate-800 rounded-2xl flex gap-4 transition-all items-center text-emerald-400"><i class="fas fa-truck-moving opacity-50"></i> Frota & Equipa</button>
        </nav>
    </div>

    <header class="bg-slate-950/50 backdrop-blur-md p-4 sticky top-0 z-50 flex justify-between items-center border-b border-slate-800/50 no-print">
        <button onclick="toggleMenu()" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-slate-800">
            <i class="fas fa-bars-staggered"></i>
        </button>
        <div class="flex flex-col items-center">
            <span class="text-[10px] font-bold text-yellow-500 tracking-[0.2em] uppercase">Cloud System</span>
            <h1 class="font-extrabold text-sm tracking-widest uppercase">Master Monitor</h1>
        </div>
        <div class="w-3 h-3 bg-emerald-500 rounded-full relative">
            <div class="absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-75"></div>
        </div>
    </header>

    <main class="p-4 max-w-2xl mx-auto space-y-6">
        
        <section id="dashboard" class="tab-content active">
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 class="text-2xl font-extrabold text-white">Sua Frota</h2>
                    <p class="text-slate-500 text-sm">Status em tempo real</p>
                </div>
                <div class="text-right">
                    <span id="fleet-count" class="text-3xl font-black text-yellow-500">0</span>
                    <p class="text-[10px] uppercase font-bold text-slate-500">Ativos</p>
                </div>
            </div>
            <div id="fleet-list" class="grid grid-cols-1 gap-4"></div>
        </section>

        <section id="relatorios" class="tab-content">
            <div class="glass-card p-6 rounded-3xl space-y-6">
                <div class="flex justify-between items-start">
                    <h2 class="text-purple-400 font-extrabold text-lg italic uppercase tracking-tighter">Performance</h2>
                    <button onclick="window.print()" class="w-10 h-10 bg-slate-800 rounded-xl flex items-center justify-center hover:bg-purple-600 transition-all"><i class="fas fa-file-pdf"></i></button>
                </div>

                <div class="space-y-3">
                    <div class="flex p-1 bg-slate-900 rounded-2xl">
                        <button id="btn-diario" onclick="filtrarRelatorio('diario')" class="flex-1 py-2 text-[10px] font-bold uppercase rounded-xl transition-all">Hoje</button>
                        <button id="btn-mensal" onclick="filtrarRelatorio('mensal')" class="flex-1 py-2 text-[10px] font-bold uppercase rounded-xl transition-all">Mês</button>
                        <button id="btn-anual" onclick="filtrarRelatorio('anual')" class="flex-1 py-2 text-[10px] font-bold uppercase rounded-xl transition-all">Ano</button>
                    </div>
                    <select id="filtro-maquina-rel" onchange="atualizarPeriodoAtual()" class="w-full bg-slate-950 p-3 rounded-xl border border-slate-800 text-xs font-bold text-slate-400 outline-none"></select>
                </div>

                <div class="relative">
                    <canvas id="chartProd" style="max-height: 220px;"></canvas>
                </div>
                <div id="stats-list" class="grid grid-cols-1 gap-2"></div>
            </div>
        </section>

        <section id="config-rev" class="tab-content space-y-4">
            <div class="glass-card p-6 rounded-3xl border-l-4 border-orange-500">
                <h2 class="text-white font-bold mb-4 flex items-center gap-2"><i class="fas fa-layer-group text-orange-500"></i> Criar Plano</h2>
                <div class="flex gap-2">
                    <input type="text" id="rev-n" placeholder="Nome" class="flex-1 bg-slate-950 p-4 rounded-2xl border border-slate-800 text-sm outline-none">
                    <input type="number" id="rev-h" placeholder="Horas" class="w-24 bg-slate-950 p-4 rounded-2xl border border-slate-800 text-sm outline-none">
                    <button onclick="window.criarTipoRevisao(document.getElementById('rev-n').value, document.getElementById('rev-h').value)" class="bg-orange-600 w-14 rounded-2xl transition-all"><i class="fas fa-plus"></i></button>
                </div>
            </div>
            <div class="glass-card p-6 rounded-3xl">
                <h2 class="text-white font-bold mb-4">Vincular à Máquina</h2>
                <div class="space-y-3">
                    <select id="sel-t-vinc" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800"></select>
                    <select id="sel-r-vinc" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800"></select>
                    <button onclick="window.vincularRevisao(document.getElementById('sel-t-vinc').value, document.getElementById('sel-r-vinc').value)" class="w-full bg-white text-slate-950 py-4 rounded-2xl font-black uppercase text-xs hover:bg-orange-500 transition-all">Sincronizar</button>
                </div>
            </div>
        </section>

        <section id="lancamento" class="tab-content">
            <div class="glass-card p-8 rounded-[2.5rem] border border-yellow-500/20 shadow-2xl">
                <div class="text-center mb-8">
                    <div class="w-16 h-16 bg-yellow-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-yellow-500 text-2xl"></i>
                    </div>
                    <h2 class="text-2xl font-black text-white uppercase italic">Apontamento</h2>
                    <p class="text-slate-500 text-xs">Sincronização imediata com a cloud</p>
                </div>
                <form id="form-h" class="space-y-4">
                    <select id="sel-t-lan" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800 font-bold text-yellow-500"></select>
                    <select id="sel-o-lan" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800"></select>
                    <div class="pt-4">
                        <input type="number" step="0.1" id="h-input" placeholder="0000.0" class="w-full bg-transparent p-4 text-center text-7xl font-black text-white outline-none placeholder:text-slate-900">
                        <p class="text-center text-[10px] text-slate-600 font-bold uppercase tracking-widest">Leitura do Horímetro</p>
                    </div>
                    <button class="w-full bg-yellow-500 text-slate-950 py-5 rounded-3xl font-black uppercase shadow-xl active:scale-95 transition-all mt-6">Confirmar</button>
                </form>
            </div>
        </section>

        <section id="log-horas" class="tab-content space-y-4">
            <div class="glass-card p-4 rounded-3xl space-y-3">
                <div class="flex items-center gap-3 px-2">
                    <i class="fas fa-magnifying-glass text-slate-500"></i>
                    <input type="text" id="filter-search" oninput="render()" placeholder="Pesquisar máquina ou operador..." class="bg-transparent w-full outline-none text-sm">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <input type="date" id="filter-date" onchange="render()" class="bg-slate-950 border border-slate-800 rounded-xl p-3 text-xs text-white">
                    <button onclick="clearFilters()" class="bg-slate-800 text-[10px] font-bold rounded-xl uppercase">Limpar</button>
                </div>
            </div>
            <div id="logs-list" class="space-y-3"></div>
        </section>

        <section id="cad-trator" class="tab-content space-y-6">
            <div class="glass-card p-6 rounded-3xl">
                <h2 class="text-emerald-400 font-bold mb-4 uppercase text-sm">Adicionar Máquina</h2>
                <div class="flex gap-2 mb-2">
                    <input type="text" id="t-mod-new" placeholder="Modelo" class="flex-1 bg-slate-950 p-4 rounded-2xl border border-slate-800">
                    <button onclick="window.salvarTrator(document.getElementById('t-mod-new').value, document.getElementById('t-hor-new').value)" class="bg-emerald-600 px-6 rounded-2xl transition-all"><i class="fas fa-check"></i></button>
                </div>
                <input type="number" id="t-hor-new" placeholder="Horas Atuais" class="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800">
            </div>
            <div class="glass-card p-6 rounded-3xl">
                <h2 class="text-blue-400 font-bold mb-4 uppercase text-sm">Novo Operador</h2>
                <div class="flex gap-2">
                    <input type="text" id="o-nome-new" placeholder="Nome" class="flex-1 bg-slate-950 p-4 rounded-2xl border border-slate-800">
                    <button onclick="window.salvarOperador(document.getElementById('o-nome-new').value)" class="bg-blue-600 px-6 rounded-2xl transition-all"><i class="fas fa-user-plus"></i></button>
                </div>
            </div>
        </section>

    </main>

    <nav class="fixed bottom-6 left-4 right-4 bg-slate-900/80 backdrop-blur-xl border border-white/5 h-20 rounded-[2rem] flex justify-around items-center px-2 z-[55] shadow-2xl no-print">
        <button onclick="openTab('dashboard')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-12 active" id="btn-tab-dashboard">
            <i class="fas fa-th-large text-xl"></i>
            <span class="text-[8px] font-bold uppercase">Frota</span>
        </button>
        <button onclick="openTab('relatorios')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-12" id="btn-tab-relatorios">
            <i class="fas fa-chart-line text-xl"></i>
            <span class="text-[8px] font-bold uppercase">Relat</span>
        </button>
        <button onclick="openTab('lancamento')" class="relative -translate-y-8">
            <div class="bg-yellow-500 text-slate-950 w-14 h-14 rounded-2xl rotate-45 flex items-center justify-center shadow-xl shadow-yellow-500/20 active:scale-90 transition-all">
                <i class="fas fa-plus -rotate-45 text-2xl"></i>
            </div>
        </button>
        <button onclick="openTab('log-horas')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-12" id="btn-tab-log-horas">
            <i class="fas fa-history text-xl"></i>
            <span class="text-[8px] font-bold uppercase">Logs</span>
        </button>
        <button onclick="openTab('cad-trator')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-12" id="btn-tab-cad-trator">
            <i class="fas fa-cog text-xl"></i>
            <span class="text-[8px] font-bold uppercase">Config</span>
        </button>
    </nav>

    <script>
        let myChart = null;
        let periodoAtual = 'anual';

        window.showToast = (msg, type) => {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast show glass-card border-l-4 p-4 rounded-2xl shadow-2xl flex items-center gap-3 ${type==='success'?'border-emerald-500':'border-orange-500'}`;
            toast.innerHTML = `<i class="fas ${type==='success'?'fa-check-circle text-emerald-500':'fa-exclamation-triangle text-orange-500'}"></i><span class="text-xs font-bold">${msg}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(()=>toast.remove(), 500); }, 3000);
        };

        function toggleMenu() { document.getElementById('side-menu').classList.toggle('open'); document.getElementById('overlay').classList.toggle('hidden'); }
        function navTo(id) { toggleMenu(); openTab(id); }
        
        function openTab(id) { 
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active')); 
            document.getElementById(id).classList.add('active'); 
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-tab-' + id)?.classList.add('active');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function clearFilters() {
            document.getElementById('filter-search').value = '';
            document.getElementById('filter-date').value = '';
            render();
        }

        document.getElementById('form-h').onsubmit = (e) => {
            e.preventDefault();
            const trator = document.getElementById('sel-t-lan').value;
            const operador = document.getElementById('sel-o-lan').value;
            const valor = document.getElementById('h-input').value;
            if(!valor) return window.showToast("Insira o horímetro", "warning");
            window.registrarHoras(trator, operador, valor);
            e.target.reset(); openTab('dashboard');
        };

        window.atualizarPeriodoAtual = () => {
            window.filtrarRelatorio(periodoAtual);
        };

        window.filtrarRelatorio = (periodo) => {
            periodoAtual = periodo;
            ['diario', 'mensal', 'anual'].forEach(p => {
                const btn = document.getElementById(`btn-${p}`);
                if(p === periodo) btn.classList.add('bg-purple-600', 'text-white');
                else btn.classList.remove('bg-purple-600', 'text-white');
            });

            const maquinaSel = document.getElementById('filtro-maquina-rel').value;
            const stats = {}; 
            window.frota.forEach(t => { if(maquinaSel === 'todos' || maquinaSel === t.modelo) stats[t.modelo] = 0; });

            const agora = new Date();
            window.logs.forEach(log => {
                const [d,m,a] = log.data.split('/');
                const logDate = new Date(a, m-1, d);
                const matchP = (periodo==='diario' && logDate.toDateString()===agora.toDateString()) || 
                               (periodo==='mensal' && logDate.getMonth()===agora.getMonth() && logDate.getFullYear()===agora.getFullYear()) || 
                               (periodo==='anual');
                const matchM = (maquinaSel === 'todos' || maquinaSel === log.maquina);
                if(matchP && matchM && stats[log.maquina] !== undefined) stats[log.maquina] += parseFloat(log.valor);
            });
            renderChart(stats);
        };

        function renderChart(stats) {
            const ctx = document.getElementById('chartProd').getContext('2d');
            if(myChart) myChart.destroy();
            myChart = new Chart(ctx, { 
                type:'line', 
                data: { 
                    labels: Object.keys(stats), 
                    datasets:[{ data: Object.values(stats), borderColor:'#a855f7', backgroundColor: 'rgba(168, 85, 247, 0.1)', fill: true, tension: 0.4, borderWidth: 4, pointRadius: 4 }] 
                }, 
                options: { plugins:{legend:{display:false}}, scales: { y:{display:false}, x:{grid:{display:false}, ticks:{color:'#475569', font:{size:9}}} } } 
            });
            document.getElementById('stats-list').innerHTML = Object.entries(stats).map(([k,v])=>`
                <div class="flex justify-between items-center bg-slate-900/50 p-4 rounded-2xl border border-slate-800">
                    <span class="text-[10px] font-bold text-slate-400 uppercase">${k}</span>
                    <span class="text-sm font-black text-white">${v.toFixed(1)}h</span>
                </div>`).join('');
        }

        function render() {
            if(!window.frota || !window.tiposRev) return;
            document.getElementById('fleet-count').innerText = window.frota.length;

            // Listagem Frota
            document.getElementById('fleet-list').innerHTML = window.frota.map(t => {
                let barras = (t.planos || []).map(pid => {
                    const r = window.tiposRev[pid];
                    if(!r) return "";
                    const resta = r.horas - (t.horimetro % r.horas);
                    const perc = Math.min(((t.horimetro % r.horas) / r.horas) * 100, 100);
                    const color = perc > 90 ? 'bg-red-500' : perc > 75 ? 'bg-orange-500' : 'bg-emerald-500';
                    return `<div class="mt-4"><div class="flex justify-between text-[9px] mb-1"><span class="font-bold text-slate-400 uppercase">${r.nome}</span><span class="text-slate-500 font-bold">${resta.toFixed(1)}h restantes</span></div><div class="w-full bg-slate-950 h-2 rounded-full overflow-hidden"><div class="h-full ${color} transition-all duration-1000" style="width:${perc}%"></div></div></div>`;
                }).join('');

                return `<div class="glass-card p-6 rounded-[2rem] relative overflow-hidden group">
                    <div class="flex justify-between items-start mb-2 relative z-10">
                        <div><h3 class="text-lg font-black text-white tracking-tight">${t.modelo}</h3><p class="text-[10px] text-emerald-500 font-bold uppercase tracking-widest">Ativo</p></div>
                        <div class="text-right"><span class="text-2xl font-black text-yellow-500">${t.horimetro.toFixed(1)}</span><span class="text-[9px] block font-bold text-slate-500 uppercase">Horas</span></div>
                    </div>
                    <div class="relative z-10">${barras || '<p class="text-[9px] text-slate-600 mt-4 italic">Sem planos ativos</p>'}</div>
                </div>`;
            }).join('');

            // Selects
            const optT = window.frota.map(t => `<option value="${t.id}">${t.modelo}</option>`).join('');
            document.getElementById('sel-t-vinc').innerHTML = `<option value="">Selecionar Máquina...</option>` + optT;
            document.getElementById('sel-t-lan').innerHTML = optT;
            document.getElementById('sel-r-vinc').innerHTML = `<option value="">Selecionar Plano...</option>` + Object.values(window.tiposRev).map(r => `<option value="${r.id}">${r.nome} (${r.horas}h)</option>`).join('');
            document.getElementById('sel-o-lan').innerHTML = window.oper.map(o => `<option value="${o.nome}">${o.nome}</option>`).join('');
            
            const selRel = document.getElementById('filtro-maquina-rel');
            const valAntigo = selRel.value;
            selRel.innerHTML = `<option value="todos">Todas as Máquinas</option>` + window.frota.map(t => `<option value="${t.modelo}">${t.modelo}</option>`).join('');
            selRel.value = valAntigo || 'todos';

            // Logs
            const search = document.getElementById('filter-search').value.toLowerCase();
            const date = document.getElementById('filter-date').value;
            const dateF = date ? date.split('-').reverse().join('/') : "";
            const filtered = window.logs.filter(l => (l.maquina.toLowerCase().includes(search) || l.quem.toLowerCase().includes(search)) && (!date || l.data === dateF));

            document.getElementById('logs-list').innerHTML = filtered.length > 0 ? filtered.map(l => `
                <div class="glass-card p-5 rounded-2xl flex flex-col gap-3 border-l-2 border-yellow-500/30">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-2"><span class="text-[9px] text-slate-400 font-extrabold uppercase tracking-tighter">${l.data} | ${l.hora || '--'}</span></div>
                        <span class="text-lg font-black text-white">${l.valor}h</span>
                    </div>
                    <div class="flex justify-between items-end">
                        <div><span class="text-[9px] block text-slate-500 font-bold uppercase tracking-widest">Equipamento</span><span class="text-sm font-bold text-yellow-500 uppercase">${l.maquina}</span></div>
                        <div class="text-right"><span class="text-[9px] block text-slate-500 font-bold uppercase tracking-widest">Operador</span><span class="text-xs italic text-slate-300">${l.quem}</span></div>
                    </div>
                </div>`).join('') : '<div class="text-center py-20 opacity-20"><p class="text-[10px] font-bold uppercase">Nenhum registo</p></div>';
        }
    </script>
</body>
</html>
